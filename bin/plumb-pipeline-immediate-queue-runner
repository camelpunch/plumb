#!/usr/bin/env ruby

require 'json'
require_relative '../lib/plumb/infrastructure/queue'
require_relative '../lib/plumb/infrastructure/queue_runner'

module Plumb
  module ImmediateQueueRunner
    class << self
      def call
        runner = Infrastructure::QueueRunner.new(
          Infrastructure::Queue.new('pipeline-immediate-queue'),
          ->{ sleep 1 }
        )
        #builder = Domain::Builder.new(
          #Infrastructure::GitRepository.new,
          #Infrastructure::Reporter.new
        #)

        #loop do
          #runner.run &builder.public_method(:build)
        #end
      end
    end
  end
end
Plumb::ImmediateQueueRunner.call

